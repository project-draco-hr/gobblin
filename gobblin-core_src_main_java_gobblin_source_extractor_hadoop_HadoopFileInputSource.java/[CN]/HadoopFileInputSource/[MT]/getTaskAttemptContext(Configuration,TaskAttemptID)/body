{
  Class<?> taskAttemptContextClass;
  try {
    taskAttemptContextClass=Class.forName("org.apache.hadoop.mapreduce.task.TaskAttemptContextImpl");
  }
 catch (  ClassNotFoundException cnfe) {
    try {
      taskAttemptContextClass=Class.forName("org.apache.hadoop.mapreduce.TaskAttemptContext");
    }
 catch (    ClassNotFoundException cnfe1) {
      throw new RuntimeException(cnfe1);
    }
  }
  try {
    return (TaskAttemptContext)taskAttemptContextClass.getDeclaredConstructor(Configuration.class,TaskAttemptID.class).newInstance(configuration,taskAttemptID);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
