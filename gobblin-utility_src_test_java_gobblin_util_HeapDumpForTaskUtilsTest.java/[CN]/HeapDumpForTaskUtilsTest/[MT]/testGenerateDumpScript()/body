{
  Path dumpScript=new Path(TEST_DIR + SCRIPT_NAME);
  HeapDumpForTaskUtils.generateDumpScript(dumpScript,this.fs,"test.hprof","chmod 777 ");
  Assert.assertEquals(true,this.fs.exists(dumpScript));
  Assert.assertEquals(true,this.fs.exists(new Path(dumpScript.getParent() + "/dumps/")));
  Closer closer=Closer.create();
  BufferedReader scriptReader=closer.register(new BufferedReader(new InputStreamReader(this.fs.open(dumpScript))));
  Assert.assertEquals("#!/bin/sh",scriptReader.readLine());
  Assert.assertEquals("hadoop dfs -put test.hprof dumpScript/dumps/${PWD//\\//_}.hprof",scriptReader.readLine());
}
