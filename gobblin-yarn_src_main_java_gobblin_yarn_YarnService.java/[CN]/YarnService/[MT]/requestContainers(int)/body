{
  for (int i=0; i < containersRequested; i++) {
    Priority priority=Records.newRecord(Priority.class);
    priority.setPriority(0);
    Resource capability=Records.newRecord(Resource.class);
    int maxMemoryCapacity=this.maxResourceCapacity.get().getMemory();
    capability.setMemory(this.requestedContainerMemoryMbs <= maxMemoryCapacity ? this.requestedContainerMemoryMbs : maxMemoryCapacity);
    int maxCoreCapacity=this.maxResourceCapacity.get().getVirtualCores();
    capability.setVirtualCores(this.requestedContainerCores <= maxCoreCapacity ? this.requestedContainerCores : maxCoreCapacity);
    this.amrmClientAsync.addContainerRequest(new AMRMClient.ContainerRequest(capability,null,null,priority));
  }
}
