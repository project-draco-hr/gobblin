{
  Properties testProperties=new Properties();
  Tag<String> expectedPropertyTag=new Tag<String>("key1","value1");
  JobMetrics.addCustomTagToProperties(testProperties,expectedPropertyTag);
  State testState=new State(testProperties);
  List<Tag<?>> tags=JobMetrics.getCustomTagsFromState(testState);
  Assert.assertEquals(Iterables.getFirst(tags,null),expectedPropertyTag);
  Tag<String> expectedStateTag=new Tag<String>("key2","value2");
  JobMetrics.addCustomTagToState(testState,expectedStateTag);
  tags=JobMetrics.getCustomTagsFromState(testState);
  Assert.assertTrue(tags.containsAll(ImmutableList.of(expectedPropertyTag,expectedStateTag)));
}
