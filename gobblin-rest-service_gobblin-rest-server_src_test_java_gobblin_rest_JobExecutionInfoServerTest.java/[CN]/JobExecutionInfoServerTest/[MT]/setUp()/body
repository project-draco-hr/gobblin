{
  Properties properties=new Properties();
  properties.setProperty(ConfigurationKeys.JOB_HISTORY_STORE_JDBC_DRIVER_KEY,"org.apache.derby.jdbc.EmbeddedDriver");
  properties.setProperty(ConfigurationKeys.JOB_HISTORY_STORE_URL_KEY,"jdbc:derby:memory:gobblin;create=true");
  String randomPort=chooseRandomPort();
  properties.setProperty(ConfigurationKeys.REST_SERVER_PORT_KEY,randomPort);
  prepareJobHistoryStoreDatabase(properties);
  Injector injector=Guice.createInjector(new MetaStoreModule(properties));
  this.jobHistoryStore=injector.getInstance(JobHistoryStore.class);
  this.client=new JobExecutionInfoClient(String.format("%s:%s/","http://localhost",randomPort));
  this.server=new JobExecutionInfoServer(properties);
  this.server.startUp();
  this.expected1=createJobExecutionInfo(1);
  this.expected2=createJobExecutionInfo(2);
  this.jobHistoryStore.put(this.expected1);
  this.jobHistoryStore.put(this.expected2);
}
