{
  TestInstrumentedConverter converter=new TestInstrumentedConverter();
  converter.init(new WorkUnitState());
  Iterable<String> iterable=converter.convertRecord("schema","record",new WorkUnitState());
  Map<String,Long> metrics=MetricsHelper.dumpMetrics(converter.instrumented);
  Assert.assertEquals(metrics.get("gobblin.converter.records.in"),Long.valueOf(1));
  Assert.assertEquals(metrics.get("gobblin.converter.records.out"),Long.valueOf(0));
  Assert.assertEquals(metrics.get("gobblin.converter.conversion.time"),Long.valueOf(1));
  iterable.iterator().next();
  metrics=MetricsHelper.dumpMetrics(converter.instrumented);
  Assert.assertEquals(metrics.get("gobblin.converter.records.in"),Long.valueOf(1));
  Assert.assertEquals(metrics.get("gobblin.converter.records.out"),Long.valueOf(1));
  Assert.assertEquals(MetricsHelper.dumpTags(converter.instrumented).get("component"),"converter");
}
