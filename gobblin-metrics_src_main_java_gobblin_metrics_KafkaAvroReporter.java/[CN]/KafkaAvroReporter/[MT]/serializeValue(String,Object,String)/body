{
  GenericRecord record=new GenericData.Record(SCHEMA);
  record.put("name",MetricRegistry.name(name,path));
  record.put("value",value);
  record.put("tags",this.tags);
  try {
    this.out.reset();
    this.writer.write(record,this.encoder);
    this.encoder.flush();
    return out.toByteArray();
  }
 catch (  IOException e) {
    LOGGER.trace("Could not serialize Avro record for Kafka Metrics. Exception: %s",e.getMessage());
    if (System.currentTimeMillis() - this.lastSerializeExceptionTime > 10000) {
      LOGGER.warn("Could not serialize Avro record for Kafka Metrics. Exception: %s",e.getMessage());
      this.lastSerializeExceptionTime=System.currentTimeMillis();
    }
  }
  return null;
}
