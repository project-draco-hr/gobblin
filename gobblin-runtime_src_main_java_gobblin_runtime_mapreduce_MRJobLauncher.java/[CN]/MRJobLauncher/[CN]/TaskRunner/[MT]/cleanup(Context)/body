{
  try {
    this.serviceManager.stopAsync().awaitStopped(5,TimeUnit.SECONDS);
  }
 catch (  TimeoutException te) {
  }
 finally {
    if (this.jobMetrics.isPresent()) {
      try {
        this.jobMetrics.get().triggerMetricReporting();
        this.jobMetrics.get().stopMetricReporting();
      }
  finally {
        JobMetrics.remove(this.jobMetrics.get().getName());
      }
    }
  }
}
