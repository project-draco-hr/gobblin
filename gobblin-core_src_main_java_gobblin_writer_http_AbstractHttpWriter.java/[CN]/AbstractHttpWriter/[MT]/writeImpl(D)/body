{
  this.curRequest=onNewRecord(record,this.curRequest);
  if (this.curRequest.isPresent()) {
    ListenableFuture<HttpResponse> responseFuture=sendRequest(this.curRequest.get());
    waitForResponse(responseFuture);
    try {
      processResponse(responseFuture.get());
    }
 catch (    InterruptedException|ExecutionException e) {
      throw new RuntimeException(e);
    }
  }
}
