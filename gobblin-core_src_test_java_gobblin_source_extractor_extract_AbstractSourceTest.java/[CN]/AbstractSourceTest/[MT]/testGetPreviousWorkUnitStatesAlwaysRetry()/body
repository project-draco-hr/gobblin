{
  TestSource testSource=new TestSource();
  SourceState mockedState=mock(SourceState.class);
  List<WorkUnitState> previousWorkUnitStates=Collections.singletonList(new WorkUnitState());
  when(mockedState.getPreviousWorkUnitStates()).thenReturn(previousWorkUnitStates);
  when(mockedState.contains(ConfigurationKeys.WORK_UNIT_RETRY_POLICY_KEY)).thenReturn(Boolean.FALSE);
  when(mockedState.getPropAsBoolean(ConfigurationKeys.WORK_UNIT_RETRY_ENABLED_KEY,Boolean.TRUE)).thenReturn(Boolean.TRUE);
  Assert.assertEquals(testSource.getPreviousWorkUnitStatesForRetry(mockedState),previousWorkUnitStates);
}
