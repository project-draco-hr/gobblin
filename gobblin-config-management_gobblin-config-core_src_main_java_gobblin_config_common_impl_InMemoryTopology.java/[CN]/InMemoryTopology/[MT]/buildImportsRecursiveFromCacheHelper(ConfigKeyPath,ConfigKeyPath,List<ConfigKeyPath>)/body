{
  for (  ConfigKeyPath p : previous) {
    if (currentConfigKey != null && currentConfigKey.equals(p)) {
      previous.add(p);
      throw new CircularDependencyException(getCircularDependencyChain(initialConfigKey,previous,currentConfigKey));
    }
  }
  if (currentConfigKey.isRootPath()) {
    return Collections.emptyList();
  }
  List<ConfigKeyPath> result=new ArrayList<>();
  List<ConfigKeyPath> rawList=this.getOwnImportsFromCache(currentConfigKey);
  List<ConfigKeyPath> imported=new ArrayList<ConfigKeyPath>();
  imported.addAll(rawList);
  if (!currentConfigKey.isRootPath()) {
    imported.add(currentConfigKey.getParent());
  }
  for (  ConfigKeyPath u : imported) {
    if (!u.equals(currentConfigKey.getParent())) {
      result.add(u);
    }
    List<ConfigKeyPath> current=new ArrayList<ConfigKeyPath>();
    current.addAll(previous);
    current.add(currentConfigKey);
    List<ConfigKeyPath> subResult=null;
    if (this.recursiveImportMap.containsKey(u)) {
      subResult=this.recursiveImportMap.get(u);
    }
 else {
      subResult=buildImportsRecursiveFromCacheHelper(initialConfigKey,u,current);
      this.addToListMapForListValue(this.recursiveImportMap,u,subResult);
    }
    result.addAll(subResult);
  }
  return dedup(result);
}
