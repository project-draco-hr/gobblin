{
  List<State> flattenedWorkUnits=Lists.newArrayList();
  for (  State state : states) {
    if (state instanceof MultiWorkUnit) {
      for (      State mulitWorkUnitChild : ((MultiWorkUnit)state).getWorkUnits()) {
        flattenedWorkUnits.add(mulitWorkUnitChild);
      }
    }
 else {
      flattenedWorkUnits.add(state);
    }
  }
  return flattenedWorkUnits;
}
