{
  if (!cmd.getCommandType().equals(SftpCommandType.GET_STREAM)) {
    throw new SftpCommandFormatException("Command must be of type GET_STREAM");
  }
  List<String> params=cmd.getParams();
  SftpGetMonitor monitor=new SftpGetMonitor();
  InputStream stream=null;
  if (params.size() == 1) {
    stream=sftp.get(params.get(0),monitor);
  }
 else   if (params.size() == 2) {
    try {
      stream=sftp.get(params.get(0),monitor,Long.parseLong(params.get(1)));
    }
 catch (    NumberFormatException e) {
      throw new SftpCommandFormatException("GET command passed a non-long value",e);
    }
  }
 else {
    throw new SftpCommandFormatException("GET command does correct number of arguments");
  }
  return stream;
}
