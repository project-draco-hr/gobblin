{
  while (proxy.write(buffer) > 0) {
  }
  if (buffer.remaining() == 0) {
    proxy.register(selector,SelectionKey.OP_READ,this);
    state=HandlerState.READING;
    buffer=ByteBuffer.allocate(1024);
  }
}
