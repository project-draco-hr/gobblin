{
  if (!cmd.getCommandType().equals(SftpCommandType.GET_FILE)) {
    throw new SftpCommandFormatException("Command must be of type GET_FILE");
  }
  List<String> params=cmd.getParams();
  SftpGetMonitor monitor=new SftpGetMonitor();
  if (params.size() == 2) {
    log.info("Attempting to download file: " + params.get(0) + " to dest: "+ params.get(1));
    FileOutputStream out=null;
    try {
      out=new FileOutputStream(new File(params.get(1)));
      sftp.get(params.get(0),out,monitor);
    }
  finally {
      if (out != null) {
        out.close();
      }
    }
  }
 else {
    throw new SftpCommandFormatException("GET command does correct number of arguments");
  }
}
