{
  String jobName=jobState.getJobName();
  String jobId=jobState.getJobId();
  LOG.info("Performing cleanup for job " + jobId);
  if (this.jobSourceMap.containsKey(jobId)) {
    this.jobSourceMap.remove(jobId).shutdown(jobState);
  }
  this.jobStateMap.remove(jobId);
  try {
    if (!runOnce) {
      this.lastJobIdMap.put(jobName,jobId);
      this.jobLockMap.get(jobName).unlock();
    }
 else {
      if (this.runOnceJobs.containsKey(jobName)) {
        this.scheduler.deleteJob(this.runOnceJobs.remove(jobName));
      }
      this.jobLockMap.remove(jobName).unlock();
    }
  }
 catch (  Exception e) {
    LOG.error("Failed to cleanup job " + jobId,e);
  }
}
