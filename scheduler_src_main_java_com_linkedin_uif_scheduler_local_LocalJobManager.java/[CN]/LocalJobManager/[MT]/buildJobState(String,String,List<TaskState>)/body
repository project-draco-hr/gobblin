{
  JobState jobState=new JobState(jobName,jobId);
  long startTime=this.jobStartTimeMap.get(jobId);
  long endTime=System.currentTimeMillis();
  jobState.setStartTime(startTime);
  jobState.setEndTime(endTime);
  jobState.setDuration(endTime - startTime);
  jobState.addTaskStates(taskStates);
  jobState.setState(JobState.RunningState.COMMITTED);
  for (  TaskState taskState : taskStates) {
    if (taskState.getWorkingState() == WorkUnitState.WorkingState.FAILED) {
      jobState.setState(JobState.RunningState.FAILED);
      break;
    }
    if (taskState.getWorkingState() == WorkUnitState.WorkingState.ABORTED) {
      jobState.setState(JobState.RunningState.ABORTED);
      break;
    }
  }
  return jobState;
}
