{
  byte[] bytes=new byte[ARRAY_LENGTH];
  for (int i=0; i < ARRAY_LENGTH; i++) {
    bytes[i]=(byte)(i % 256);
  }
  ByteArrayInputStream is=new ByteArrayInputStream(bytes);
  BufferedRawByteIterator it=new BufferedRawByteIterator(is,BUFFER_LENGTH);
  int count=0;
  while (it.hasNext()) {
    byte[] nextChunk=it.next();
    Assert.assertEquals(nextChunk[0],bytes[count]);
    Assert.assertTrue(nextChunk.length <= BUFFER_LENGTH);
    count+=nextChunk.length;
  }
  Assert.assertEquals(count,ARRAY_LENGTH);
}
