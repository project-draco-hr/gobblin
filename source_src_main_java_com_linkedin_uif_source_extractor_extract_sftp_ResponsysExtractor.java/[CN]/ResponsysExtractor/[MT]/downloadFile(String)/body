{
  log.info("Beginning to download file: " + file);
  Command sftpCmd=new SftpCommand().build(Arrays.asList(file),SftpCommandType.GET_STREAM);
  try {
    Iterator<String> fileItr=IOUtils.lineIterator(GPGFileDecrypter.decryptGPGFile(executor.executeGetStreamCommand((SftpCommand)sftpCmd,this.sftp),this.workUnit.getProp(RESPONSYS_DECRYPT_KEY)),"UTF-8");
    fileHandles.put(file,(LineIterator)fileItr);
    if (workUnitState.getPropAsBoolean(ConfigurationKeys.SOURCE_SKIP_FIRST_RECORD,false) && fileItr.hasNext()) {
      fileItr.next();
    }
    return fileItr;
  }
 catch (  SftpException e) {
    throw new IOException("Exception while downloading file " + file + " with message "+ e.getMessage(),e);
  }
catch (  SftpCommandFormatException e) {
    throw new RuntimeException("Error while constructing download file commands " + e.getMessage(),e);
  }
}
