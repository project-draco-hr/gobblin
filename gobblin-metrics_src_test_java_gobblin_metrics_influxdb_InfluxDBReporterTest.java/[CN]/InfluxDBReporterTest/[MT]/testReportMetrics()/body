{
  Gauge<Integer> queueSizeGauge=new Gauge<Integer>(){
    @Override public Integer getValue(){
      return 1000;
    }
  }
;
  Counter recordsProcessedCounter=new Counter();
  recordsProcessedCounter.inc(10l);
  Histogram recordSizeDistributionHistogram=new Histogram(new ExponentiallyDecayingReservoir());
  recordSizeDistributionHistogram.update(1);
  recordSizeDistributionHistogram.update(2);
  recordSizeDistributionHistogram.update(3);
  Meter recordProcessRateMeter=new Meter();
  recordProcessRateMeter.mark(1l);
  recordProcessRateMeter.mark(2l);
  recordProcessRateMeter.mark(3l);
  Timer totalDurationTimer=new Timer();
  totalDurationTimer.update(1,TimeUnit.SECONDS);
  totalDurationTimer.update(2,TimeUnit.SECONDS);
  totalDurationTimer.update(3,TimeUnit.SECONDS);
  SortedMap<String,Counter> counters=ImmutableSortedMap.<String,Counter>naturalOrder().put(RECORDS_PROCESSED,recordsProcessedCounter).build();
  SortedMap<String,Gauge> gauges=ImmutableSortedMap.<String,Gauge>naturalOrder().put(QUEUE_SIZE,queueSizeGauge).build();
  SortedMap<String,Histogram> histograms=ImmutableSortedMap.<String,Histogram>naturalOrder().put(RECORD_SIZE_DISTRIBUTION,recordSizeDistributionHistogram).build();
  SortedMap<String,Meter> meters=ImmutableSortedMap.<String,Meter>naturalOrder().put(RECORD_PROCESS_RATE,recordProcessRateMeter).build();
  SortedMap<String,Timer> timers=ImmutableSortedMap.<String,Timer>naturalOrder().put(TOTAL_DURATION,totalDurationTimer).build();
  this.influxDBReporter.report(gauges,counters,histograms,meters,timers);
  Assert.assertEquals(((Integer)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,QUEUE_SIZE)).getRows().get(0).get(InfluxDBReporter.VALUE)).intValue(),1000);
  Assert.assertEquals(((Long)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,RECORDS_PROCESSED,Measurements.COUNT.getName())).getRows().get(0).get(InfluxDBReporter.VALUE)).longValue(),10l);
  Assert.assertEquals(((Long)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,RECORD_PROCESS_RATE,Measurements.COUNT.getName())).getRows().get(0).get(InfluxDBReporter.VALUE)).longValue(),6l);
  Assert.assertEquals(((Long)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,RECORD_SIZE_DISTRIBUTION,Measurements.COUNT.getName())).getRows().get(0).get(InfluxDBReporter.VALUE)).longValue(),3l);
  Assert.assertEquals(((Long)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,TOTAL_DURATION,Measurements.COUNT.getName())).getRows().get(0).get(InfluxDBReporter.VALUE)).longValue(),3l);
  recordsProcessedCounter.inc(5l);
  recordSizeDistributionHistogram.update(4);
  recordProcessRateMeter.mark(4l);
  totalDurationTimer.update(4,TimeUnit.SECONDS);
  this.influxDBReporter.report(gauges,counters,histograms,meters,timers);
  Assert.assertEquals(((Integer)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,QUEUE_SIZE)).getRows().get(0).get(InfluxDBReporter.VALUE)).intValue(),1000);
  Assert.assertEquals(((Long)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,RECORDS_PROCESSED,Measurements.COUNT.getName())).getRows().get(0).get(InfluxDBReporter.VALUE)).longValue(),15l);
  Assert.assertEquals(((Long)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,RECORD_PROCESS_RATE,Measurements.COUNT.getName())).getRows().get(0).get(InfluxDBReporter.VALUE)).longValue(),10l);
  Assert.assertEquals(((Long)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,RECORD_SIZE_DISTRIBUTION,Measurements.COUNT.getName())).getRows().get(0).get(InfluxDBReporter.VALUE)).longValue(),4l);
  Assert.assertEquals(((Long)this.influxDB.getSerie(MetricRegistry.name(CONTEXT_NAME,TOTAL_DURATION,Measurements.COUNT.getName())).getRows().get(0).get(InfluxDBReporter.VALUE)).longValue(),4l);
}
