{
  if (!this.writerOpt.isPresent()) {
    return null;
  }
  try {
    this.byteArrayOutputStream.reset();
    writeSchemaVersioningInformation(this.out);
    this.writerOpt.get().write(report,this.encoder);
    this.encoder.flush();
    return this.byteArrayOutputStream.toByteArray();
  }
 catch (  IOException exception) {
    LOGGER.warn("Could not serialize Avro record for Kafka Metrics.",exception);
    return null;
  }
}
