{
  TestInstrumentedForkOperator fork=new TestInstrumentedForkOperator();
  fork.init(new WorkUnitState());
  fork.forkDataRecord(new WorkUnitState(),"in");
  Map<String,Long> metrics=MetricsHelper.dumpMetrics(fork.instrumented);
  Assert.assertEquals(metrics.get("gobblin.fork.operator.records.in"),Long.valueOf(1));
  Assert.assertEquals(metrics.get("gobblin.fork.operator.forks.out"),Long.valueOf(2));
  Assert.assertEquals(metrics.get("gobblin.fork.operator.timer"),Long.valueOf(1));
  Assert.assertEquals(MetricsHelper.dumpTags(fork.instrumented).get("component"),"forkOperator");
}
