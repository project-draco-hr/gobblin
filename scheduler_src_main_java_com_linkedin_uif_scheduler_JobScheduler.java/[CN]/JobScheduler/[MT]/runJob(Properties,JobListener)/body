{
  String jobName=jobProps.getProperty(ConfigurationKeys.JOB_NAME_KEY);
  if (Strings.isNullOrEmpty(jobName)) {
    throw new JobException("A job must have a job name specified by job.name");
  }
  jobProps.setProperty(ConfigurationKeys.JOB_ID_KEY,JobLauncherUtils.newJobId(jobName));
  try {
    JobLauncher jobLauncher=JobLauncherFactory.newJobLauncher(this.properties);
    jobLauncher.launchJob(jobProps,jobListener);
    boolean runOnce=Boolean.valueOf(jobProps.getProperty(ConfigurationKeys.JOB_RUN_ONCE_KEY,"false"));
    if (runOnce && this.scheduledJobs.containsKey(jobName)) {
      this.scheduler.deleteJob(this.scheduledJobs.remove(jobName));
    }
  }
 catch (  Throwable t) {
    String errMsg="Failed to launch and run job " + jobName;
    LOG.error(errMsg,t);
    throw new JobException(errMsg,t);
  }
}
